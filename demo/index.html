<html>

<head>
    <!-- IE11 does support addEventListener(). Disable compatibility mode. -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Load a custom font -->
    <link href="https://fonts.googleapis.com/css?family=Caveat" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,600" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Nunito:300, 700" rel="stylesheet">

    <!-- The main js library -->
    <script src="../src/js/jquery-autotag-1.4.js"></script>


    <!-- Required for input area to appear correctly across browsers -->
    <link rel="stylesheet" type="text/css" href="./../src/css/jquery-autotag.css">
    <link rel="stylesheet" type="text/css" href="./css/icons.css">

    <!-- Demo page styles -->
    <link rel="stylesheet" type="text/css" href="./css/demo.css">
    <link rel="stylesheet" type="text/css" href="./css/tooltip.css">

</head>

<body>
    <div class="page-header">
        <div class="page-title">autotag.js</div>
        <div class="page-msg">
            A simple and lightweight (~10kb) text formatter built in plain Javascript.
        </div>
    </div>

    <div class="page-notepad">
        <div class="demo-container autotag-editor">
            <div id="menubar" class="demo-menubar autotag-menubar">
                <span class="demo-menu autotag-menu"
                      data-autotag-select="font-size">
                  <span class="icon-size"></span>
                  <span class="icon-drop-down"></span>

                  <div style="display:none;" class="demo-submenu autotag-submenu">
                    <div data-autotag-set="font-size: 11px">8</div>
                    <div data-autotag-set="font-size: 12px">9</div>
                    <div data-autotag-set="font-size: 13px">10</div>
                    <div data-autotag-set="font-size: 14px">11</div>
                    <div data-autotag-set="font-size: 16px">12</div>
                    <div data-autotag-set="font-size: 19px">14</div>
                    <div data-autotag-set="font-size: 24px">18</div>
                    <div data-autotag-set="font-size: 32px">24</div>
                    <div data-autotag-set="font-size: 40px">30</div>
                    <div data-autotag-set="font-size: 52px">40</div>
                  </div>
                </span>

                <span class="demo-menu-sep"></span>

                <span class="icon-bold demo-menu autotag-menu"
                    data-autotag-toggle="font-weight:bold"></span>

                <span class="icon-italic demo-menu autotag-menu"
                    data-autotag-toggle="font-style:italic"></span>

                <span class="icon-underlined demo-menu autotag-menu"
                    data-autotag-toggle="text-decoration:underline"></span>

                <span class="demo-menu-sep"></span>

                <span class="icon-color-text demo-menu autotag-menu"
                    data-autotag-palette="color"></span>

                <span class="icon-color-fill demo-menu autotag-menu"
                    data-autotag-palette="fill"></span>

                <span class="demo-menu-sep"></span>

                <span class="icon-align-left demo-menu autotag-menu"
                    data-autotag-scope="line"
                    data-autotag-set="text-align: left"></span>

                <span class="icon-align-center demo-menu autotag-menu"
                    data-autotag-scope="line"
                    data-autotag-set="text-align: center"></span>

                <span class="icon-align-right demo-menu autotag-menu"
                    data-autotag-scope="line"
                    data-autotag-set="text-align: right"></span>

                <span class="icon-align-justify demo-menu autotag-menu"
                    data-autotag-scope="line"
                    data-autotag-set="text-align: justify"></span>

                <span class="demo-menu-sep"></span>

                <span class="icon-line-spacing demo-menu autotag-menu"
                    data-autotag-scope="line"
                    data-autotag-toggle="line-height: 60px"></span>

                <span class="demo-menu-sep"></span>

                <span class="icon-indent-right demo-menu autotag-menu"
                    data-autotag-scope="line"
                    data-autotag-increment="margin-left: 25px"></span>

                <span class="icon-indent-left demo-menu autotag-menu"
                    data-autotag-scope="line"
                    data-autotag-decrement="margin-left: 25px"></span>

                <span class="demo-menu-sep"></span>

                <span class="icon-list-bulleted demo-menu autotag-menu"
                    data-autotag-scope="line"
                    data-autotag-initialize="margin-left: 50px"
                    data-autotag-toggle="display:list-item; list-style-type:disc"></span>

                <span class="icon-list-numbered demo-menu autotag-menu"
                    data-autotag-scope="line"
                    data-autotag-initialize="margin-left: 50px"
                    data-autotag-toggle="display: list-item; list-style-type: decimal;"></span>

                <span class="demo-menu-sep"></span>

                <span class="icon-clear demo-menu autotag-menu"
                    data-autotag-command="clear"></span>
            </div>
            <div id="notepad" class="demo-input demo-notepad autotag-textarea" contentEditable="true">
                <!-- This content was generated in the notepad -->
                <p><a style="display: inline; font-size: 32px;">Try</a><a style="display: inline; font-size: 32px;">&nbsp;</a><a style="display: inline; font-size: 32px;">typing</a><a style="display: inline; font-size: 32px;">&nbsp;</a><a style="display: inline; font-size: 32px;" class="demo-pronoun" data-tooltip="Pronoun">something</a><a style="display: inline; font-size: 32px;">&nbsp;</a><a style="display: inline; font-size: 32px;">here...</a></p>
                <!-- End generated content -->
            </div>
        </div>
    </div>

    <div class="page-section page-about-editor">
        <div class="page-section-text">
            <div class="page-section-text-title">
                Build Your Own Text Editor
            </div>
            <div class="page-section-text-body">
                autotag.js provides a simple and intuitive way to apply custom formatting to text under the cursor.
            </div>
        </div>
        <div class="page-section-image ">
            <img class="editor-image" src="./images/editor.png"/>
        </div>
    </div>

    <script type="text/javascript">
          var pronouns = [
              'your', 'I', 'they', 'their', 'we', 'who', 'them', 'its', 'our', 'my',
              'those', 'he', 'us', 'her', 'something', 'me', 'yourself', 'someone',
              'everything', 'itself', 'everyone', 'themselves', 'anyone', 'him',
              'whose', 'myself', 'everybody', 'ourselves', 'himself', 'somebody',
              'yours', 'herself', 'whoever', 'you', 'that', 'it', 'this', 'what',
              'which', 'these', 'his', 'she', 'lot', 'anything', 'whatever', 'nobody',
              'none', 'mine', 'anybody'
          ];

          var notepad = document.getElementById('notepad');
          var menubar = document.getElementById('menubar');

          var getMenuClassList = function(className) {
            return menubar.getElementsByClassName(className)[0].classList;
          };

          var boldMenuClassList = getMenuClassList('icon-bold');
          var italicMenuClassList = getMenuClassList('icon-italic');
          var underlinedMenuClassList = getMenuClassList('icon-underlined');

          var setMenuIconState = function(classList, isActive) {
            if (classList) {
              if (isActive) {
                classList.add('demo-menu-active');
              } else {
                classList.remove('demo-menu-active');
              }
            }
          };

          var isBold = function(tag) {
            return tag.style.getPropertyValue('font-weight') == 'bold';
          };

          var isItalic = function(tag) {
            return tag.style.getPropertyValue('font-style') == 'italic';
          };

          var isUnderlined = function(tag) {
            return tag.style.getPropertyValue('text-decoration') == 'underline';
          };

          var demo_config = {
              decorator: function(node, text) {
                  text = text.replace(/,$/, '').toLowerCase();
                  if (pronouns.indexOf(text) >= 0) {
                      node.setAttribute('class', 'demo-pronoun');
                      node.setAttribute('data-tooltip', 'Pronoun');
                  } else if (text.match(/[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/)) {
                      node.setAttribute('class', 'demo-url');
                  } else if (text.match(/^#[\w]{2}[\w]*$/)) {
                      node.setAttribute('class', 'demo-hash-tag');
                  } else if (text.match(/^[\+][\w]{2}[\w]*$/)) {
                      node.setAttribute('class', 'demo-plus-sign');
                  } else {
                      // Always remember to clean the node!
                      node.removeAttribute('class');
                      node.removeAttribute('data-tooltip');
                  }
              },

              afterSelection: function(tags) {
                var tag;
                if (tags.length == 1 && (tag = tags[0])) {
                  setMenuIconState(boldMenuClassList, isBold(tag));
                  setMenuIconState(italicMenuClassList, isItalic(tag));
                  setMenuIconState(underlinedMenuClassList, isUnderlined(tag));
                }
              },

              trace: false,
              ignoreReturnKey: false
          };

          new Autotag(notepad, demo_config).attachMenubar(menubar);
    </script>
</body>

</html>
